<div class="login-wrapper" fxLayout="row" fxLayoutAlign="center center">
    <mat-card>
        <mat-card-title>Log in</mat-card-title>
        <form *ngIf="((api.mode$ | async) === ServiceMode.INITIAL)" (ngSubmit)="submitInitial()">
            <mat-card-content fxLayout="column" fxLayoutAlign="center stretch" fxLayoutGap="1.1rem">
                <learninghouse-alert [alertType]="AlertType.warning">
                    You have to change <a target="_blank" rel="noreferrer noopener"
                        href="https://github.com/LearningHouseService/learninghouse-core#security">fallback
                        password</a> to
                    unlock.
                </learninghouse-alert>
                <learninghouse-alert [alertType]="AlertType.error" *ngIf="loginError$ | async">
                    {{loginError$ |async}}
                </learninghouse-alert>
                <learninghouse-password name="Fallback password" [control]="old_password">
                </learninghouse-password>
                <learninghouse-password name="New password" [control]="new_password">
                </learninghouse-password>
            </mat-card-content>
            <mat-card-actions align="end">
                <button type="submit" mat-raised-button color="primary" [disabled]="!initial.valid"
                    (click)="submitInitial()">Change
                    password</button>
            </mat-card-actions>
        </form>
        <form *ngIf="((api.mode$ | async) !== ServiceMode.INITIAL)" (ngSubmit)="submitLoginAdmin()">
            <mat-card-content fxLayout="column" fxLayoutAlign="center stretch" fxLayoutGap="1.1rem">
                <learninghouse-alert [alertType]="AlertType.error" *ngIf="loginError$ | async">
                    {{loginError$ |async}}
                </learninghouse-alert>
                <learninghouse-password name="Admin password or API key" [control]="password">
                </learninghouse-password>
            </mat-card-content>
            <mat-card-actions align="end" fxLayout="row" fxLayoutAlign="space-between center">
                <button type="button" mat-stroked-button [disabled]="!normal.valid" (click)="submitLoginAPIKey()">API
                    Key</button>
                <button type="submit" mat-raised-button color="primary" [disabled]="!normal.valid"
                    (click)="submitLoginAdmin()">Admin
                    login</button>
            </mat-card-actions>
        </form>
    </mat-card>
</div>